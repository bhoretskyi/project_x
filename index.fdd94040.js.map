{"mappings":"AAQOA,eAAeC,IACpB,MAAMC,QAAiBC,MAAM,uDAE7B,aAD6BD,EAASE,M,CAIjCJ,eAAeK,EAAYC,GAChC,MAAMJ,QAAiBC,MAAM,6CAAgBG,KAE7C,aADuBJ,EAASE,M,CCPlC,MAAMG,EAAeC,SAASC,cAAc,kBACtCC,EAAgBF,SAASC,cAAc,UACvCE,EAA6BH,SAASC,cAC1C,kCAGIG,EAAgBJ,SAASC,cAAc,sBACvCI,EAAsBL,SAASC,cAAc,4BAC7CK,EACJN,SAASC,cAAc,sBAyBzB,SAASM,IACPD,EAA+BE,UAAY,GAC3Cf,IAAcgB,MAAKC,IACjBA,EAAKC,KAAIC,IACPN,EAA+BO,mBAC7B,YACA,WACAD,EAAKE,sBAGPF,EAAKG,MAAMJ,KAAIK,IACb,GAAIA,EAASF,YAAcF,EAAKE,YAC9BR,EAA+BO,mBAC7B,YACA,YAAYG,EAASC,qCACXD,EAASE,iEACfF,EAASG,4BACVH,EAASI,gFAIVR,EAAKG,MAAM,GAAGI,QAAUH,EAASG,OAAO,CAC1BnB,SAASqB,eAAeL,EAASC,KACzCK,QAAS,C,IAGrB,GACF,G,CAlDNpB,EAAcqB,iBAAiB,SCjBtB,WACLvB,SAASqB,eAAe,WAAWG,MAAMC,QAAU,M,IDiBvDnB,EAA+BiB,iBAAiB,SAASG,IAClDA,EAAEC,OAAOC,cAAc9B,IAI5BD,EAAY6B,EAAEC,OAAOC,cAAc9B,IAChCW,MAAKC,IACJ,IAAKA,EACH,MAAM,IAAImB,MAAM,OAEG,cAAjBnB,EAAKoB,UC9BX9B,SAASqB,eAAe,WAAWG,MAAMC,QAAU,QDgC/C1B,EAAaS,UAAY,cAAcE,EAAKQ,2DACxCR,EAAKS,wBACNT,EAAKU,wBACLV,EAAKqB,0B,IAIXC,OAAMC,GAAOC,QAAQC,IAAIF,IAAK,IAEnC1B,IAgCAF,EAAoBkB,iBAAiB,SAgCrC,SAA6BG,GAC3B,MAAMU,EAAmBV,EAAEC,OAAOU,UAElC,GAAID,EAAiBE,QAAU,GAAI,CACjC,IAAIC,EAAgBH,EAAiBI,MAAM,KAEvCC,EAAaF,EAAcG,MAAM,GAAG,GAAIC,KAAK,KAC7CC,EAAWL,EAAcG,OAAM,GAGnCvC,EAA2BK,UAAY,OAAOiC,mCAA4CG,e,CAG5F,IAAIC,EAAW,GACfpD,IACGgB,MAAKC,IACJJ,EAA+BE,UAAY,GAC3C,MAAMsC,EAAgBpC,EACnBqC,QAAOnC,GACCA,EAAKE,YAAcsB,IAE3BzB,KAAIC,GAAQA,EAAKG,QACpB8B,EAASG,QAAQF,GACeD,EAAS,GACjBlC,KAAIC,IAC1BN,EAA+BO,mBAC7B,YAEA,YAAYD,EAAKK,kGACwBL,EAAKM,+FACVN,EAAKO,yDACPP,EAAKQ,yBAExC,GACD,IAEHY,OAAMC,GAAOC,QAAQC,IAAIF,I,IAnE9B7B,EAAcmB,iBAAiB,SAASG,IAEtCnB,GAAW,IDzDNf,eAAiCyD,GACtC,MAAMvD,QAAiBC,MAAM,+DAAkCsD,KAG/D,OAFAf,QAAQC,IAAIzC,SACiBA,EAASE,M,CCyHxC,CAAkB,2BAA2Ba,MAAKC,IAChDwB,QAAQC,IAAI,QAAQ,ID/If3C,iBACL,MAAME,QAAiBC,MAAM,2DAE7B,aADuBD,EAASE,M,CC+IlC,GACGa,MAAKC,IAEJ,GADAJ,EAA+BE,UAAY,IACtCE,EACH,MAAM,IAAImB,MAAM,SAElB,OAAOnB,EAAKC,KAAIsC,GACd5C,EAAoBQ,mBAClB,YACA,8BAA8BoC,EAASnC,mBAE1C,IAEFkB,OAAMC,GAAOC,QAAQC,IAAIF","sources":["src/js/books_api.js","src/index.js","src/js/modal.js"],"sourcesContent":["const API = 'https://books-backend.p.goit.global';\n\nexport async function getCategories() {\n  const response = await fetch(`${API}/books/category-list`);\n  const category = await response.json();\n  return category;\n}\n\nexport async function getBestBook() {\n  const response = await fetch(`${API}/books/top-books`);\n  const bookByCategory = await response.json();\n  return bookByCategory;\n}\n\nexport async function getBookById(id) {\n  const response = await fetch(`${API}/books/${id}`);\n  const bookById = await response.json();\n  return bookById;\n}\n\nexport async function getBookByCategory(category) {\n  const response = await fetch(`${API}/books/category?category=${category}`);\n  console.log(response);\n  const bookByCategory = await response.json();\n  return bookByCategory;\n}\n\n","import { openModal } from './js/modal.js';\nimport { closeModal } from './js/modal.js';\nimport {\n  getBestBook,\n  getCategories,\n  getBookByCategory,\n} from './js/books_api.js';\nimport { getBookById } from './js/books_api.js';\n\nconst modalContent = document.querySelector('.modal-content');\nconst closeModalBtn = document.querySelector('.close');\nconst bookCategoryTitleContainer = document.querySelector(\n  '.book-category-title-container'\n);\n\nconst allCategories = document.querySelector('.all-categories-js');\nconst categorySectionList = document.querySelector('.book-kategories-list-js');\nconst sectionSelectedBooksByCategory =\n  document.querySelector('.books-by-category');\n\ncloseModalBtn.addEventListener('click', closeModal);\nsectionSelectedBooksByCategory.addEventListener('click', e => {\n  if (!e.target.parentElement.id) {\n    return;\n  }\n\n  getBookById(e.target.parentElement.id)\n    .then(resp => {\n      if (!resp) {\n        throw new Error('err');\n      }\n      if (resp.message !== 'Not found') {\n        openModal();\n        modalContent.innerHTML = ` <img src=\"${resp.book_image}\" alt=\"\" width='287' height='408'>\n      <h4>${resp.title}</h4>\n      <p>${resp.author}</p>\n      <p>${resp.description}</p>\n      `;\n      }\n    })\n    .catch(err => console.log(err));\n});\nstartPage();\nfunction startPage() {\n  sectionSelectedBooksByCategory.innerHTML = '';\n  getBestBook().then(resp => {\n    resp.map(book => {\n      sectionSelectedBooksByCategory.insertAdjacentHTML(\n        'beforeend',\n        `\n  <h2>${book.list_name}</h2>\n  `\n      );\n      book.books.map(thisBook => {\n        if (thisBook.list_name === book.list_name) {\n          sectionSelectedBooksByCategory.insertAdjacentHTML(\n            'beforeend',\n            `<div id=\"${thisBook._id}\" hidden>\n          <img src=\"${thisBook.book_image}\" alt=\"\" loading=\"lazy\" width=\"335\">\n          <h4>${thisBook.title}</h4>\n          <p>${thisBook.author}</p>\n          <button type=\"button\"> See more</button>\n      </div>`\n          );\n          if (book.books[0].title === thisBook.title) {\n            const element = document.getElementById(thisBook._id);\n            element.hidden = false;\n          }\n        }\n      });\n    });\n  });\n}\n\ncategorySectionList.addEventListener('click', pushBooksByCategory);\nallCategories.addEventListener('click', e => {\n  // sectionSelectedBooksByCategory.innerHTML = '';\n  startPage();\n});\n// allCategories.addEventListener('click', () => {\n//   getBookByCategory()\n//     .then(resp => {\n//       sectionSelectedBooksByCategory.innerHTML = '';\n\n//       resp.map(book => {\n//         sectionSelectedBooksByCategory.insertAdjacentHTML(\n//           'beforeend',\n//           `<h2>${book.list_name}</h2>`\n//         );\n//         book.books.map(thisBook => {\n//           if (thisBook.list_name === book.list_name) {\n//             sectionSelectedBooksByCategory.insertAdjacentHTML(\n//               'beforeend',\n//               `<div id=\"${thisBook._id}\">\n//           <img src=\"${thisBook.book_image}\" alt=\"\" loading=\"lazy\" width=\"335\">\n//           <h4>${thisBook.title}</h4>\n//           <p>${thisBook.author}</p>\n//       </div>`\n//             );\n//           }\n//         });\n//       });\n//     })\n//     .catch(err => console.log(err));\n// });\n\nfunction pushBooksByCategory(e) {\n  const selectedCategory = e.target.outerText;\n\n  if (selectedCategory.length <= 33) {\n    let categoryWords = selectedCategory.split(' ');\n\n    let firstWords = categoryWords.slice(0, -1).join(' ');\n    let lastWord = categoryWords.slice(-1);\n\n    // bookCategorytTitle.textContent = selectedCategory;\n    bookCategoryTitleContainer.innerHTML = `<h2>${firstWords}<span class=\"last-title-word\"> ${lastWord}</span></h2>`;\n  }\n\n  let booksArr = [];\n  getBestBook()\n    .then(resp => {\n      sectionSelectedBooksByCategory.innerHTML = '';\n      const filteredBooks = resp\n        .filter(book => {\n          return book.list_name === selectedCategory;\n        })\n        .map(book => book.books);\n      booksArr.push(...filteredBooks);\n      const filteredByCategoryBooks = booksArr[0];\n      filteredByCategoryBooks.map(book => {\n        sectionSelectedBooksByCategory.insertAdjacentHTML(\n          'beforeend',\n\n          `<div id='${book._id}' class=\"section-book-card section-card\">\n        <img class=\"section-book-card-img\"  src=\"${book.book_image}\" alt=\"\" loading=\"lazy\" width=\"335\">\n        <h4 class=\"section-book-card-title\">${book.title}</h4>\n        <p class=\"section-book-card-text\">${book.author}</p>\n    </div>`\n        );\n      });\n    })\n    .catch(err => console.log(err));\n}\ngetBookByCategory('Graphic Books and Manga').then(resp => {\n  console.log('hello')\n})\ngetCategories()\n  .then(resp => {\n    sectionSelectedBooksByCategory.innerHTML = '';\n    if (!resp) {\n      throw new Error('error');\n    }\n    return resp.map(category =>\n      categorySectionList.insertAdjacentHTML(\n        'beforeend',\n        `<li class =\"book-category\">${category.list_name}</li>`\n      )\n    );\n  })\n  .catch(err => console.log(err));\n\n// getBestBook()\n//   .then(resp => {\n//     if (!resp) {\n//       throw new Error('error');\n//     }\n//   })\n//   .catch(err => console.log(err));\n\n","export function openModal() {\n    document.getElementById(\"myModal\").style.display = \"block\";\n  }\n  export function closeModal() {\n    document.getElementById(\"myModal\").style.display = \"none\";\n  }  "],"names":["async","$0af74fd4d73caa0f$export$56c90601a6676d25","response","fetch","json","$0af74fd4d73caa0f$export$7f429e0f3975c907","id","$1f0dc3b9307be026$var$modalContent","document","querySelector","$1f0dc3b9307be026$var$closeModalBtn","$1f0dc3b9307be026$var$bookCategoryTitleContainer","$1f0dc3b9307be026$var$allCategories","$1f0dc3b9307be026$var$categorySectionList","$1f0dc3b9307be026$var$sectionSelectedBooksByCategory","$1f0dc3b9307be026$var$startPage","innerHTML","then","resp","map","book","insertAdjacentHTML","list_name","books","thisBook","_id","book_image","title","author","getElementById","hidden","addEventListener","style","display","e","target","parentElement","Error","message","description","catch","err","console","log","selectedCategory","outerText","length","categoryWords","split","firstWords","slice","join","lastWord","booksArr","filteredBooks","filter","push","category"],"version":3,"file":"index.fdd94040.js.map"}