{"mappings":"AAQOA,eAAeC,IACpB,MAAMC,QAAiBC,MAAM,uDAE7B,aAD6BD,EAASE,M,CCPxC,MAAMC,EAAgBC,SAASC,cAAc,sBACvCC,EAAsBF,SAASC,cAAc,4BAC7CE,EACJH,SAASC,cAAc,sBACvBE,EAA+BC,iBAAiB,SAAUC,GAAKC,QAAQC,IAAIF,KAC7EH,EAAoBE,iBAAiB,SA4BrC,SAA6BC,GAC3B,MAAMG,EAAmBH,EAAEI,OAAOC,UAClC,IAAIC,EAAW,GACfhB,IACGiB,MAAKC,IACJV,EAA+BW,UAAY,GAC3C,MAAMC,EAAgBF,EACnBG,QAAOC,GACCA,EAAKC,YAAcV,IAE3BW,KAAIF,GAAQA,EAAKG,QACpBT,EAASU,QAAQN,GACeJ,EAAS,GACjBQ,KAAIF,IAC1Bd,EAA+BmB,mBAC7B,YACA,YAAYL,EAAKM,4BACPN,EAAKO,gDACXP,EAAKQ,0BACNR,EAAKS,yBAET,GACD,IAEHC,OAAMC,GAAOtB,QAAQuB,IAAID,I,IAnD9B7B,EAAcK,iBAAiB,SAAS,KACtCT,IAAoBiB,MAAKC,IACvBV,EAA+BW,UAAY,GAE3CD,EAAKM,KAAIF,IACPd,EAA+BmB,mBAC7B,YACA,gBACAL,EAAKC,0BAGPD,EAAKG,MAAMD,KAAIW,IACTA,EAASZ,YAAcD,EAAKC,WAC9Bf,EAA+BmB,mBAC7B,YACA,YAAYQ,EAASP,8BACXO,EAASN,kDACfM,EAASL,4BACVK,EAASJ,2BAEb,GAEH,GACF,GACF,ID/BGhC,iBACL,MAAME,QAAiBC,MAAM,2DAE7B,aADuBD,EAASE,M,CC2DlC,GACGc,MAAKC,IAEJ,GADAV,EAA+BW,UAAY,IACtCD,EACH,MAAM,IAAIkB,MAAM,SAElB,OAAOlB,EAAKM,KAAIa,GACd9B,EAAoBoB,mBAClB,YACA,8BAA8BU,EAASd,mBAE1C,IAEFS,OAAMC,GAAOtB,QAAQuB,IAAID,KAE5BjC,IACGiB,MAAKC,IACJ,IAAKA,EACH,MAAM,IAAIkB,MAAM,QAAQ,IAG3BJ,OAAMC,GAAOtB,QAAQuB,IAAID","sources":["src/js/books_api.js","src/index.js"],"sourcesContent":["const API = 'https://books-backend.p.goit.global';\n\nexport async function getCategories() {\n  const response = await fetch(`${API}/books/category-list`);\n  const category = await response.json();\n  return category;\n}\n\nexport async function getBookByCategory() {\n  const response = await fetch(`${API}/books/top-books`);\n  const bookByCategory = await response.json()\n  return bookByCategory\n}\n\n\n\n","import { getCategories } from './js/books_api.js';\nimport { getBookByCategory } from './js/books_api.js';\n\nconst allCategories = document.querySelector('.all-categories-js');\nconst categorySectionList = document.querySelector('.book-kategories-list-js');\nconst sectionSelectedBooksByCategory =\n  document.querySelector('.books-by-category');\n  sectionSelectedBooksByCategory.addEventListener('click', (e) =>console.dir(e))\ncategorySectionList.addEventListener('click', pushBooksByCategory);\nallCategories.addEventListener('click', () => {\n  getBookByCategory().then(resp => {\n    sectionSelectedBooksByCategory.innerHTML = '';\n\n    resp.map(book => {\n      sectionSelectedBooksByCategory.insertAdjacentHTML(\n        'beforeend',\n        `<div>\n  <h2>${book.list_name}</h2>\n</div>`\n      );\n      book.books.map(thisBook => {\n        if (thisBook.list_name === book.list_name) {\n          sectionSelectedBooksByCategory.insertAdjacentHTML(\n            'beforeend',\n            `<div id=\"${thisBook._id}\">\n          <img src=\"${thisBook.book_image}\" alt=\"\" width=\"335\">\n          <h4>${thisBook.title}</h4>\n          <p>${thisBook.author}</p>\n      </div>`\n          );\n        }\n      });\n    });\n  });\n});\n\nfunction pushBooksByCategory(e) {\n  const selectedCategory = e.target.outerText;\n  let booksArr = [];\n  getBookByCategory()\n    .then(resp => {\n      sectionSelectedBooksByCategory.innerHTML = '';\n      const filteredBooks = resp\n        .filter(book => {\n          return book.list_name === selectedCategory;\n        })\n        .map(book => book.books);\n      booksArr.push(...filteredBooks);\n      const filteredByCategoryBooks = booksArr[0];\n      filteredByCategoryBooks.map(book => {\n        sectionSelectedBooksByCategory.insertAdjacentHTML(\n          'beforeend',\n          `<div id='${book._id}'>\n        <img src=\"${book.book_image}\" alt=\"\" width=\"335\">\n        <h4>${book.title}</h4>\n        <p>${book.author}</p>\n    </div>`\n        );\n      });\n    })\n    .catch(err => console.log(err));\n}\n\ngetCategories()\n  .then(resp => {\n    sectionSelectedBooksByCategory.innerHTML = '';\n    if (!resp) {\n      throw new Error('error');\n    }\n    return resp.map(category =>\n      categorySectionList.insertAdjacentHTML(\n        'beforeend',\n        `<li class =\"book-category\">${category.list_name}</li>`\n      )\n    );\n  })\n  .catch(err => console.log(err));\n\ngetBookByCategory()\n  .then(resp => {\n    if (!resp) {\n      throw new Error('error');\n    }\n  })\n  .catch(err => console.log(err));\n"],"names":["async","$0af74fd4d73caa0f$export$3356e9d9184fb14f","response","fetch","json","$1f0dc3b9307be026$var$allCategories","document","querySelector","$1f0dc3b9307be026$var$categorySectionList","$1f0dc3b9307be026$var$sectionSelectedBooksByCategory","addEventListener","e","console","dir","selectedCategory","target","outerText","booksArr","then","resp","innerHTML","filteredBooks","filter","book","list_name","map","books","push","insertAdjacentHTML","_id","book_image","title","author","catch","err","log","thisBook","Error","category"],"version":3,"file":"index.f22e4084.js.map"}