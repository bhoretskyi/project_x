{"mappings":"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","sources":["src/js/shop.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport { openBurgerModal, closeBurgerModal } from './modal';\nimport { getBookById } from './books_api';\nconst shopListBookSection = document.querySelector('.shop-list-books-section');\nconst amazon = document.querySelector('.amazon');\nconst ios = document.querySelector('.book-ios');\nconst shop = document.querySelector('.book-shop');\nconst trashSvg = document.querySelector('.svg');\nconst homeBtn = document.querySelector('.home-btn')\nhomeBtn.classList.remove('current')\nconst shoplistBtn = document.querySelector('.list-btn')\nshoplistBtn.classList.add('current')\n\nconst savedBooks = JSON.parse(localStorage.getItem('books'));\nfunction paintBooksFromLocalstorage() {\n  savedBooks.map(book => {\n    getBookById(book)\n      .then(resp => {\n        if (!resp) {\n          throw new Error('error');\n        }\n        let shortdescription = ''\n        const words = resp.description.split(' ')\n        if (words.length > 10) {\n          shortdescription = words.slice(0, 10).join(' ') + '...';  \n        }\n\n        shopListBookSection.insertAdjacentHTML(\n          'beforeend',\n          `<div class=\"shopping-list-card\">\n    \n          \n        <img class=\"shopping-list-image\"  src=\"${resp.book_image}\" alt=\"\">   \n        <div class=\"shopping-list-info\">\n        \n<div class=\"shopping-list-title-container\">\n          \n      <h4 class=\"shopping-list-title\">${resp.title}</h4>\n      <h5 class=\"shopping-list-classlist\">${resp.list_name}</h5> \n\n      \n       \n      <p class=\"shopping-list-description\" hidden>${resp.description}</p>  \n      <p class=\"shopping-list-description-short\">${shortdescription}</p>   \n      </div>\n      \n      <div class=\"shopping-list-book-links\">\n      <p class=\"shopping-list-author\">${resp.author}</p>\n      <a href=\"${resp.buy_links[0].url}\" target=\"_blank\"><img src=\"${amazon.src}\" alt=\"\"></a>   \n      <a href=\"${resp.buy_links[1].url}\" target=\"_blank\"><img src=\"${ios.src}\" alt=\"\"></a>   \n      <a href=\"${resp.buy_links[4].url}\" target=\"_blank\"><img src=\"${shop.src}\" alt=\"\"></a>\n      </div>\n      </div>\n        \n    \n\n      \n      \n      <button type=\"button\" class=\"trash-btn\"><img class=\"trash-js\"  src=\"${trashSvg.src}\" alt=\"\"></button>\n      <p hidden>${resp._id}</p> \n      </div>\n      \n`\n        );\n        \n        \n      })\n      .catch(err => {\n        Notiflix.Notify.failure('Oops... something went wrong. Please reload the page')\n        console.log(err)});\n  });\n}\n\npaintBooksFromLocalstorage();\n\nshopListBookSection.addEventListener('click', e => {  \n  if (e.target.className === 'trash-js') {\n\n\n  \n    const bookToRemoveId =\n    e.target.parentElement.parentElement.lastElementChild.textContent\n    const newSavedBooks = savedBooks.filter(item => item !== bookToRemoveId);    \n    localStorage.setItem('books', JSON.stringify(newSavedBooks)); \n    location.reload();\n  }\n});\n\n// const trashButton = document.querySelector('.trash-btn');\n\n// trashButton.addEventListener('click', e => {\n//     e.stopPropagation()\n//   console.log(e.target);\n// });\n\n\n\nconst checkBox = document.querySelector('.checkbox')\n //console.log(loginForm);\nconst svgIconHeader = document.querySelector('.icon-bookshelf');\nconst listItemQ = document.querySelector('.book-categories-list');\nconst svgIconShop = document.querySelector('.list-btn-svg');\nconst headerFone = document.querySelector('.header-container');\nconst section = document.querySelector('.shop-list-books-section')\n//const shoppingListtitle = document.querySelector('section.div')\n//console.log(shoppingListtitle.textContent);\n\ncheckBox.addEventListener('change', chengeThemeShopp);\n\nfunction chengeThemeShopp() {\n  console.log('Клик работает')\n  document.body.classList.toggle('dark-thema');\n  svgIconHeader.classList.toggle('svg-icon-header');\n  svgIconShop.classList.toggle('svg-icon-header');\n  headerFone.classList.toggle('header-fone');\n  //shoppingListCard.classList.toggle('shopping-card');\n  //shoppingListtitle.classList.toggle('shopping-card');\n  const ttt = section.getElementsByClassName('shopping-list-card');\n  console.log(ttt);\n  for (const a of ttt) {\n    a.classList.toggle('shopping-card'); \n  }\n  console.log(ttt)\n  \n\n} \n\nconst burgerBtn = document.querySelector('.js-burger');\nconst burgerCloseBtn = document.querySelector('.js-close-menu');\n\nburgerBtn.addEventListener('click', () => {\n  openBurgerModal();\n  burgerBtn.hidden = true;\n  burgerCloseBtn.classList.remove('is-hidden-btn');\n});\nburgerCloseBtn.addEventListener('click', () => {\n  closeBurgerModal();\n  burgerCloseBtn.classList.add('is-hidden-btn');\n  burgerBtn.hidden = false;\n});\n\nfunction chekWindowSize () {\n  if (window.innerWidth >= 768) {\n    closeBurgerModal()\n    burgerCloseBtn.classList.add('is-hidden-btn');\n  burgerBtn.hidden = false;\n    \n  }\n}\nwindow.addEventListener('resize', chekWindowSize )\n\n"],"names":["$6JpON","parcelRequire","$3f17f0eca129ffdb$var$shopListBookSection","document","querySelector","$3f17f0eca129ffdb$var$amazon","$3f17f0eca129ffdb$var$ios","$3f17f0eca129ffdb$var$shop","$3f17f0eca129ffdb$var$trashSvg","classList","remove","add","$3f17f0eca129ffdb$var$savedBooks","JSON","parse","localStorage","getItem","map","book","$4LYdF","getBookById","then","resp","Error","shortdescription","words","description","split","length","slice","join","insertAdjacentHTML","concat","book_image","title","list_name","author","buy_links","url","src","_id","catch","err","$parcel$interopDefault","Notify","failure","console","log","addEventListener","e","target","className","bookToRemoveId","parentElement","lastElementChild","textContent","newSavedBooks","filter","item","setItem","stringify","location","reload","$3f17f0eca129ffdb$var$checkBox","$3f17f0eca129ffdb$var$svgIconHeader","$3f17f0eca129ffdb$var$svgIconShop","$3f17f0eca129ffdb$var$headerFone","$3f17f0eca129ffdb$var$section","body","toggle","ttt","getElementsByClassName","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","return","$3f17f0eca129ffdb$var$burgerBtn","$3f17f0eca129ffdb$var$burgerCloseBtn","$5xtVg","openBurgerModal","hidden","closeBurgerModal","window","innerWidth"],"version":3,"file":"shopping_list.b007422e.js.map"}